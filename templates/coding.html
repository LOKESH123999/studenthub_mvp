{% extends "base.html" %}
{% block content %}
<div class="page-title">
  <h1>Coding log</h1>
  <div class="muted">Track DSA + projects practice (manual logging in MVP).</div>
</div>

<section class="card">
  <h2>Add entry</h2>
  <form class="form grid-6" method="post" action="/coding/add">
    <div>
      <label>Date</label>
      <input name="log_date" type="date" value="{{ today }}" required/>
    </div>
    <div>
      <label>Platform</label>
      <input name="platform" required placeholder="LeetCode / GFG / CF"/>
    </div>
    <div>
      <label>Problem</label>
      <input name="problem" required placeholder="Two Sum"/>
    </div>
    <div>
      <label>Difficulty</label>
      <input name="difficulty" placeholder="Easy/Medium/Hard"/>
    </div>
    <div>
      <label>Topic</label>
      <input name="topic" placeholder="Arrays, DP, Graphs"/>
    </div>
    <div>
      <label>Link</label>
      <input name="link" placeholder="https://..."/>
    </div>
    <div class="full">
      <button class="btn" type="submit">Add</button>
    </div>
  </form>
</section>

<section class="card">
  <h2>Recent entries</h2>
  {% if logs|length == 0 %}
    <p class="muted">No logs yet.</p>
  {% else %}
    <table class="table">
      <thead><tr><th>Date</th><th>Platform</th><th>Problem</th><th>Difficulty</th><th>Topic</th><th>Link</th><th></th></tr></thead>
      <tbody>
      {% for l in logs %}
        <tr>
          <td class="mono">{{ l.log_date }}</td>
          <td>{{ l.platform }}</td>
          <td>{{ l.problem }}</td>
          <td class="muted">{{ l.difficulty or "" }}</td>
          <td class="muted">{{ l.topic or "" }}</td>
          <td>
            {% if l.link %}
              <a href="{{ l.link }}" target="_blank" rel="noreferrer">Open</a>
            {% endif %}
          </td>
          <td>
            <form method="post" action="/coding/delete" onsubmit="return confirm('Delete log?');">
              <input type="hidden" name="log_id" value="{{ l.id }}"/>
              <button class="btn btn-danger" type="submit">Delete</button>
            </form>
          </td>
        </tr>
      {% endfor %}
      </tbody>
    </table>
  {% endif %}
</section>
{% endblock %}
