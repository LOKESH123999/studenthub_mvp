{% extends "base.html" %}
{% block content %}
<div class="page-title">
  <h1>Subjects</h1>
  <div class="muted">Add your semester subjects (and target attendance).</div>
</div>

<section class="card">
  <h2>Add subject</h2>
  <form class="form grid-4" method="post" action="/subjects/add">
    <div>
      <label>Code</label>
      <input name="code" placeholder="CS301"/>
    </div>
    <div>
      <label>Name</label>
      <input name="name" required placeholder="Data Structures"/>
    </div>
    <div>
      <label>Credits</label>
      <input name="credits" type="number" min="0" value="0"/>
    </div>
    <div>
      <label>Target attendance %</label>
      <input name="target_attendance" type="number" min="0" max="100" step="0.1" value="75"/>
    </div>
    <div class="full">
      <button class="btn" type="submit">Add</button>
    </div>
  </form>
</section>

<section class="card">
  <h2>Your subjects</h2>
  {% if subjects|length == 0 %}
    <p class="muted">No subjects yet.</p>
  {% else %}
    <table class="table">
      <thead><tr><th>Code</th><th>Name</th><th>Credits</th><th>Target</th><th></th></tr></thead>
      <tbody>
      {% for s in subjects %}
        <tr>
          <td class="mono">{{ s.code }}</td>
          <td>{{ s.name }}</td>
          <td class="mono">{{ s.credits }}</td>
          <td class="mono">{{ s.target_attendance }}%</td>
          <td>
            <form method="post" action="/subjects/delete" onsubmit="return confirm('Delete subject? This will also remove its timetable & attendance.');">
              <input type="hidden" name="subject_id" value="{{ s.id }}"/>
              <button class="btn btn-danger" type="submit">Delete</button>
            </form>
          </td>
        </tr>
      {% endfor %}
      </tbody>
    </table>
  {% endif %}
</section>
{% endblock %}
